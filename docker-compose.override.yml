services:
  web:
    image: ghcr.io/clayauld/pandoc-md2pdf-web:latest
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - NODE_ENV=development
    volumes:
      - ./public:/app/public:ro
      - ./server:/app/server
      # Keep container-installed deps even when mounting the source directory
      - /app/server/node_modules
      - ./server/scripts/filter.lua:/app/filter.lua:ro
      - ./server/scripts/watermark.tex:/app/watermark.tex:ro
      - ./server/scripts/convert_to_pdf.sh:/app/convert_to_pdf.sh:ro